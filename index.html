<!DOCTYPE html>
<html>
<head>
	<title>three.js canvas - interactive particles</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<style>
		body {
			font-family: Monospace;
			background-color: #f0f0f0;
			margin: 0px;
			overflow: hidden;
		}
		
		h1{
			color: purple;
			font-size: 50px;
			position: absolute;
			background: repeating-linear-gradient(-45deg, red, transparent 5px, transparent 5px, transparent 10px);
			top: 50px;
			left: 300px;

		}
		
	</style>
</head>
<body>
	

	<script src="js/three.min.js"></script>

	<script src="js/Projector.js"></script>
	<script src="js/CanvasRenderer.js"></script>

	<script src="js/stats.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	
	<script>
		var container, stats, jumbo,nom;
		var camera, scene, renderer;
		var raycaster;
		var mouse;
		var PI2 = Math.PI * 2;
		var programFill = function ( context ) {
			context.beginPath();
			context.arc( 0, 0, 0.5, 0, PI2, true );
			context.fill();
		};
		var programStroke = function ( context ) {
			context.lineWidth = 0.025;
			context.beginPath();
			context.arc( 0, 0, 0.5, 0, PI2, true );
			context.stroke();
		};
		var INTERSECTED;
		init();
		animate();
		function init() {
			container = document.createElement( 'div' );
			container.id= 'ctn';
			document.body.appendChild( container );

			camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 10000 );
			camera.position.set( 0, 100, 400 );
			scene = new THREE.Scene();
			scene.background = new THREE.Color(  0x6de88f );
			for ( var i = 0; i < 100; i ++ ) {
				var particle = new THREE.Sprite( new THREE.SpriteCanvasMaterial( { color: Math.random() * 0x808080 + 0x808080, program: programStroke } ) );
				particle.position.x = Math.random() * 800 - 400;
				particle.position.y = Math.random() * 800 - 400;
				particle.position.z = Math.random() * 800 - 400;
				particle.scale.x = particle.scale.y = Math.random() * 20 + 20;
				scene.add( particle );
			}

				//
				
				raycaster = new THREE.Raycaster();
				mouse = new THREE.Vector2();
				renderer = new THREE.CanvasRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				container.appendChild( renderer.domElement );
				
				document.addEventListener( 'mousemove', onDocumentMouseMove, false );
				//
				window.addEventListener( 'resize', onWindowResize, false );
			}
			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight );
			}
			function onDocumentMouseMove( event ) {
				event.preventDefault();
				mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
				mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
			}
			//
			function animate() {
				requestAnimationFrame( animate );
				render();
				
			}
			var radius = 400;
			var theta = 0;
			function render() {
				// rotate camera
				theta += 0.2;
				camera.position.x = radius * Math.sin( THREE.Math.degToRad( theta ) );
				camera.position.y = radius * Math.sin( THREE.Math.degToRad(theta) );
				camera.position.z = radius * Math.cos( THREE.Math.degToRad( theta ) );
				camera.lookAt( scene.position );
				camera.updateMatrixWorld();
				// find intersections
				raycaster.setFromCamera( mouse, camera );
				var intersects = raycaster.intersectObjects( scene.children );
				if ( intersects.length > 0 ) {
					if ( INTERSECTED != intersects[ 0 ].object ) {
						if ( INTERSECTED ) INTERSECTED.material.program = programStroke;
						INTERSECTED = intersects[ 0 ].object;
						INTERSECTED.material.program = programFill;
					}
				} else {
					if ( INTERSECTED ) INTERSECTED.material.program = programStroke;
					INTERSECTED = null;
				}
				renderer.render( scene, camera );
			}
			jumbo = document.createElement('h1');
			container.appendChild(jumbo);
			jumbo.innerHTML = 'WHAT I AM';
			
			

		</script>

	</body>
	</html>
